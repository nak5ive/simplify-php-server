<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
        <style>
            body {
                margin: 0;
            }
            iframe {
                display: block;       /* iframes are inline by default */
                border: none;         /* Reset default border */
                height: 100vh;        /* Viewport-relative units */
                width: 100vw;
            }
        </style>
        <script>
            window.onload = function() {
                // get url params
                const urlParams = new URLSearchParams(window.location.search);
                const acsUrl = urlParams.get('acsUrl');
                const paReq = urlParams.get('paReq');
                const md = urlParams.get('md');
                const termUrl = urlParams.get('termUrl');

                // build form html
                var html = '<form method="post" enctype="application/x-www-form-urlencoded" action="' + acsUrl + '">'
                    + '<input type="hidden" name="PaReq" value="' + paReq + '"/>'
                    + '<input type="hidden" name="MD" value="' + md + '"/>'
                    + '<input type="hidden" name="TermUrl" value="' + termUrl + '"/>'
                    + '<input type="submit" name="submit" value="Continue"/>'
                    + '</form>';

                // add form to iframe
                var iframe = document.getElementById('iframe');
                var doc = iframe.document;
                if (iframe.contentDocument) {
                    doc = iframe.contentDocument;
                }
                doc.open();
                doc.writeln(html);
                doc.close();
            };

            // 3ds response handler
            function handle3DSResponse(evt) {
                window.location.href = 'simplifysdk://secure3d?result=' + encodeURIComponent(evt.data);
            }

            // listen for iframe messages
            window.addEventListener("message", handle3DSResponse, false);
        </script>
    </head>
    <body>
        <iframe id="iframe"></iframe>
    </body>
</html>
